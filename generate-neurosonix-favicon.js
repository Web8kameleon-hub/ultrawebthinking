/**
 * Ultra NeuroSonix Favicon Generator
 * Creates dynamic brain-neural network favicon with infinity symbol
 * 
 * @author Ledjan Ahmati
 * @version 8.0.0 NeuroSonix Enhanced
 */

const fs = require('fs');
const path = require('path');

// SVG Template for NeuroSonix Brain Favicon
const createNeuroSonixFavicon = () => {
  return `<?xml version="1.0" encoding="UTF-8"?>
<svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .brain-outline { fill: none; stroke: #6366f1; stroke-width: 2; }
      .neural-node { fill: #8b5cf6; r: 1.5; }
      .neural-connection { stroke: #a855f7; stroke-width: 1; opacity: 0.7; }
      .infinity-symbol { fill: #3b82f6; }
      .pulse-animation { 
        animation: pulse 2s infinite;
        transform-origin: center;
      }
      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.1); opacity: 0.8; }
      }
    </style>
  </defs>
  
  <!-- Brain outline -->
  <path class="brain-outline" d="M8 12c0-4 3-7 7-7s7 3 7 7c2 0 4 2 4 4s-2 4-4 4c0 4-3 7-7 7s-7-3-7-7c-2 0-4-2-4-4s2-4 4-4z"/>
  
  <!-- Neural nodes -->
  <circle class="neural-node pulse-animation" cx="12" cy="10" r="1.5"/>
  <circle class="neural-node pulse-animation" cx="20" cy="10" r="1.5"/>
  <circle class="neural-node pulse-animation" cx="16" cy="14" r="1.5"/>
  <circle class="neural-node pulse-animation" cx="10" cy="18" r="1.5"/>
  <circle class="neural-node pulse-animation" cx="22" cy="18" r="1.5"/>
  <circle class="neural-node pulse-animation" cx="16" cy="22" r="1.5"/>
  
  <!-- Neural connections -->
  <line class="neural-connection" x1="12" y1="10" x2="16" y2="14"/>
  <line class="neural-connection" x1="20" y1="10" x2="16" y2="14"/>
  <line class="neural-connection" x1="16" y1="14" x2="10" y2="18"/>
  <line class="neural-connection" x1="16" y1="14" x2="22" y2="18"/>
  <line class="neural-connection" x1="10" y1="18" x2="16" y2="22"/>
  <line class="neural-connection" x1="22" y1="18" x2="16" y2="22"/>
  
  <!-- Central infinity symbol -->
  <path class="infinity-symbol pulse-animation" d="M13 16c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2zm4 0c0 1 1 2 2 2s2-1 2-2-1-2-2-2-2 1-2 2z" opacity="0.9"/>
</svg>`;
};

// Generate multiple favicon formats
const generateFavicons = () => {
  const publicDir = path.join(__dirname, '..', 'public');
  
  // Create public directory if it doesn't exist
  if (!fs.existsSync(publicDir)) {
    fs.mkdirSync(publicDir, { recursive: true });
  }
  
  // Generate SVG favicon
  const svgContent = createNeuroSonixFavicon();
  fs.writeFileSync(path.join(publicDir, 'favicon.svg'), svgContent);
  
  // Generate ICO placeholder (would need a proper ICO converter for production)
  const icoHtml = `<!-- NeuroSonix Favicon - Generated by Ultra System -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">`;
  
  // Create HTML snippet for easy copy-paste
  fs.writeFileSync(path.join(publicDir, 'favicon-html.txt'), icoHtml);
  
  // Generate Web App Manifest
  const manifest = {
    "name": "UltraWebThinking NeuroSonix",
    "short_name": "NeuroSonix",
    "description": "Neural frequency enhanced cognitive processing",
    "icons": [
      {
        "src": "/favicon.svg",
        "sizes": "any",
        "type": "image/svg+xml"
      },
      {
        "src": "/favicon-192x192.png",
        "sizes": "192x192",
        "type": "image/png"
      },
      {
        "src": "/favicon-512x512.png",
        "sizes": "512x512", 
        "type": "image/png"
      }
    ],
    "theme_color": "#6366f1",
    "background_color": "#1e1b4b",
    "display": "standalone",
    "start_url": "/"
  };
  
  fs.writeFileSync(path.join(publicDir, 'site.webmanifest'), JSON.stringify(manifest, null, 2));
  
  console.log('üß†üéµ NeuroSonix Favicons generated successfully!');
  console.log('üìÅ Files created in /public/:');
  console.log('  ‚úÖ favicon.svg (Animated neural network)');
  console.log('  ‚úÖ favicon-html.txt (HTML snippet)');
  console.log('  ‚úÖ site.webmanifest (PWA manifest)');
  console.log('');
  console.log('üéØ To use: Copy content from favicon-html.txt to your HTML <head>');
};

// Run favicon generation
if (require.main === module) {
  generateFavicons();
}

module.exports = { generateFavicons, createNeuroSonixFavicon };
